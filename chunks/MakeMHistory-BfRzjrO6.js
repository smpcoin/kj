import{i as L,r as a,l as g,j as e,I as y,F as C,S as H}from"./vendor-CR9QeBO-.js";import{a as M}from"./arrow-Dt4f_FJz.js";import{c as f}from"../assets/index-Bvj3I4S-.js";import{S as D,L as B}from"./index-Cobmn13i.js";import{f as I}from"./helper-CPLEapGt.js";import{M as E}from"./MiningMachineSystemStorage-v65BGZKl.js";import{M as A}from"./MiningMachineSystemLogic-BvMT4rBv.js";const U="data:image/svg+xml,%3csvg%20viewBox='0%200%2016.0037%2014.0039'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='16.0036621'%20height='14.0039062'%20fill='none'%20customFrame='%23000000'%3e%3cg%20id='组合%203087'%3e%3cellipse%20id='椭圆%2038'%20rx='5.625'%20ry='5.62500143'%20cx='6.625'%20cy='6.62500143'%20stroke='rgb(68,68,68)'%20stroke-width='2'%20/%3e%3cpath%20id='矢量%2081'%20d='M11.3125%2010.2852L15%2012.9994'%20stroke='rgb(68,68,68)'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20/%3e%3c/g%3e%3c/svg%3e",$=()=>{const l=L(),[o,c]=a.useState([]),[i,w]=a.useState([]),[p,d]=a.useState(!1),[v,j]=a.useState(""),b=()=>{l("/make-mmm")},k=s=>{j(s);const r=i.filter(t=>{const n=t.distributorUsername.toLowerCase(),u=s.toLowerCase(),N=t.address.toLowerCase();return n.includes(u)||N.includes(u)});c(r)},m=a.useCallback(async()=>{try{d(!0);const s=[];for(let r=1;r<100;r++){const t=await g(f,{address:D,abi:E,functionName:"batchInfos",args:[r]}),n=await g(f,{address:B,abi:A,functionName:"batchDistributorUsernames",args:[r]});if(t[4]===0)break;s.push({time:t[4],makenum:Number(t[5]),address:t[3],rate:t[2],distributorUsername:n})}c(s),w(s)}catch(s){console.error(s)}finally{d(!1)}},[]);a.useEffect(()=>{m()},[m]);const[h,S]=a.useState(0),x=a.useRef(null);return a.useEffect(()=>{if(!x.current)return;const s=()=>{const n=window.innerHeight-180;S(n)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e.jsxs("div",{className:"h-full overflow-hidden px-[21px]",children:[e.jsxs("div",{className:"flex pt-4",children:[e.jsx("img",{src:M,alt:"",onClick:b}),e.jsx("span",{className:"m-auto text-[19px] font-bold",children:"制作母矿机记录"})]}),e.jsxs("div",{className:"relative pt-6",children:[e.jsx(y,{value:v,placeholder:"输入分销商地址查询",className:"!bg-[#f3f3f3] rounded-3xl px-4 py-2",onChange:k}),e.jsx("img",{src:U,alt:"",className:"absolute right-4 top-[32px]",width:25})]}),e.jsx("div",{ref:x,style:{height:`${h}px`},className:"no-scrollbar",children:p?e.jsx(H.Paragraph,{animated:!0,className:"customSkeleton"}):e.jsx(C,{height:h,width:"100%",itemCount:o.length,itemSize:237,itemData:o,children:z})})]})},z=({index:l,style:o,data:c})=>{const i=c[l];return e.jsx("div",{style:{...o,height:"227px"},children:e.jsxs("div",{className:"history-container flex text-[15px] mt-4",children:[e.jsxs("div",{className:"w-[80px] flex flex-col gap-2 text-[#5B5B5B]",children:[e.jsx("div",{children:"制作时间:"}),e.jsx("div",{children:"制作数量:"}),e.jsx("div",{children:"分销商备注:"}),e.jsx("div",{children:"提成比例:"}),e.jsx("div",{children:"钱包地址:"})]}),e.jsxs("div",{className:"ml-auto w-[73%] font-bold flex flex-col gap-2",children:[e.jsx("div",{children:I(i.time)}),e.jsxs("div",{children:[i.makenum," 台"]}),e.jsx("div",{children:i.distributorUsername}),e.jsxs("div",{children:[i.rate," %"]}),e.jsx("div",{className:"w-full break-words",children:i.address})]})]})})};export{$ as default};
