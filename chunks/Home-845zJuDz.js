import{j as e,C as S,i as v,r as t,u as C,l as x,D as w}from"./vendor-CR9QeBO-.js";import{c as h}from"../assets/index-CclTo9Qo.js";import{S as g}from"./index-BmXiOrEl.js";import{o as M}from"./orderStore-CEoCXZ7c.js";import{M as y}from"./MiningMachineSystemStorage-v65BGZKl.js";const N="/assets/idxLogo-C6KOzS-c.svg",k=()=>e.jsx(S.Custom,{children:({account:o,chain:s,openAccountModal:u,openChainModal:i,openConnectModal:d,mounted:l})=>{const c=l,n=c&&o&&s;return e.jsx("div",{className:"w-full flex justify-center",...!c&&{"aria-hidden":!0,style:{opacity:0,pointerEvents:"none",userSelect:"none"}},children:n?s.unsupported?e.jsx("button",{onClick:i,type:"button",className:"bg-[red] w-full rounded-3xl text-white flex justify-center py-2",children:"不支持的网络 请点击以切换到BSC网络"}):e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsxs("button",{onClick:i,style:{display:"flex",alignItems:"center"},type:"button",children:[s.hasIcon&&e.jsx("div",{style:{background:s.iconBackground,width:12,height:12,borderRadius:999,overflow:"hidden",marginRight:4},children:s.iconUrl&&e.jsx("img",{alt:s.name??"Chain icon",src:s.iconUrl,style:{width:12,height:12}})}),s.name]}),e.jsx("button",{onClick:u,type:"button",children:o.displayName})]}):e.jsx("div",{onClick:d,className:"bg-black w-full rounded-3xl text-white flex justify-center py-2",children:"连接钱包"})})}}),P=()=>{const o=v(),[s,u]=t.useState(null),[i,d]=t.useState(null),[l,c]=t.useState(null),{isConnected:n,address:a}=C(),p=t.useCallback(async()=>{try{const r=await x(h,{address:g,abi:y,functionName:"platformWallet",args:[]});d(r)}catch(r){console.log(r)}},[]);t.useEffect(()=>{p()},[p]);const b=t.useCallback(async()=>{try{const r=await x(h,{address:g,abi:y,functionName:"isMotherMachineDistributor",args:[a]});c(r)}catch(r){console.log(r)}},[a]);t.useEffect(()=>{b()},[b]);const j=async()=>{try{const r=await x(h,{address:g,abi:y,functionName:"sadmin"});u(r)}catch(r){console.error(r)}};t.useEffect(()=>{j()},[]);const m=t.useMemo(()=>{if(n)return a===s},[a,n,s]),f=t.useMemo(()=>n?a===i:!1,[a,n,i]);return t.useEffect(()=>{n&&(s!==null&&m?o("/setting"):i!==null&&f?o("/make-mmm"):l!==null&&l?o("/sale-person"):s!==null&&!m&&i!==null&&!f&&l!==null&&!l&&o("/user"))},[n,o,m,f,i,s,l]),t.useEffect(()=>{n||M.clearData()},[n]),e.jsx("div",{className:"px-[1.3125rem]",children:e.jsxs("div",{className:"bg-white rounded-3xl p-4 mt-10 flex flex-col items-center ",children:[e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("img",{src:N,alt:""})}),e.jsx(w,{className:"mt-4  w-full h-0.5 bg-[#ececee]"}),e.jsx(k,{})]})})};export{P as default};
